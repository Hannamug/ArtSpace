<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="company">

	<select id="getHall" resultType="com.example.demo.hall.dto.HallDTO">
		select *
		from hall
		where user_id = #{user_id}
	</select>

	<select id="getReserve" resultType="com.example.demo.hall.dto.ReservationDTO">
		select h.hall_name, h.address1, h.address2, rd.start_date, rd.end_date, rd.start_time, rd.end_time, u.name, r.reserve_id
		from hall h
		join reservation r on h.hall_id = r.hall_id
		join reserve_date rd on r.reserve_id = rd.reserve_id
		join user u on r.user_id = u.user_id
		where r.reserve_status = 'Y' and h.user_id = #{user_id};
	</select>

	<update id="reserveDelete">
		update reservation
		set reserve_status = 'N'
		where reserve_id = #{reserve_id}
	</update>

</mapper>