<!DOCTYPE html>
<html layout:decorate="~{html/layout/default_layout}" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/css/hall_form.css" />
    <title>Document</title>
  </head>
  <body>

	<div layout:fragment="content">	

    <section class="hall-form">
      <h1 class="header-text">공연장 장비 등록</h1>

      <form name="hall_info" method="post">
        <div>
          <div class="btn" id="plus-btn">+</div>

          <div class="item-container">
            <div class="item-row">
              <div class="btn" onclick="removeRow(this);">-</div>
              <div class="input-con">
                <select name="eq_type">
                  <option value="none" selected>선택</option>
                  <option value="mic">마이크</option>
                  <option value="english">스피커</option>
                  <option value="chinese">조명</option>
                  <option value="spanish">무대장치</option>
                  <option value="spanish">영상</option>
                  <option value="spanish">기타</option>
                </select>
                <input type="text" name="" id="" placeholder="장비 이름 ex)무선 마이크"/>
                <input type="number" name="" id="" placeholder="보유 개수" />
                <input type="number" name="" id="" placeholder="개당 가격(원)" />
              </div>
            </div>


          </div>
        </div>
      </form>

	  <a th:href="@{|/hall/form|}" class="btn">이전</a>
      <a href="javascript:" class="btn" onclick="submitAction();">등록</a>
    </section>

	</div>

    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="/js/hall_form.js"></script>
    <script>
      let plusBtn = document.querySelector("#plus-btn");

      plusBtn.addEventListener("click", function () {
        const itemRow = document.querySelector(".item-row"); //복사할 노드
        const newNode = itemRow.cloneNode(true); // 노드 복사

        console.log(newNode.lastElementChild.lastElementChild.previousElementSibling);
        newNode.lastElementChild.lastElementChild.value = null;
        newNode.lastElementChild.lastElementChild.previousElementSibling.value = null;
        newNode.lastElementChild.lastElementChild.previousElementSibling.previousElementSibling.value = null;

        document.querySelector(".item-container").appendChild(newNode);
      });

      function removeRow(e) {
        if(e.parentNode.parentNode.childElementCount > 1){
          e.parentNode.remove();
        } else {
          e.nextElementSibling.lastElementChild.value = null;
          e.nextElementSibling.lastElementChild.previousElementSibling.value = null;
          e.nextElementSibling.lastElementChild.previousElementSibling.previousElementSibling.value = null;
        }
      }
    </script>

    <script src="https://kit.fontawesome.com/194e6948f1.js" crossorigin="anonymous"></script>
  </body>
</html>
