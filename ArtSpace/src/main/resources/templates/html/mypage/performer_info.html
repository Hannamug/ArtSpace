<!DOCTYPE html>
<html layout:decorate="~{/layout/default_layout}" lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<link rel="stylesheet" href="/css/mypage/user/performer_info.css">
</head>

<body>
	<div layout:fragment="content">
		<section class="con">
			<!-- 좌측 메뉴 -->
			<div th:replace="~{fragments/mypage_user :: mypage_user_fragment}"></div>
			<!-- 내용 -->

			<div class="content">
				<h2 class="content-main">공연자 정보</h2>
				<form th:action="@{/mypage/performer}" method="post">
					<div class="list" th:if="${perfo_info == null}">

						<div>
							<div class="list-name">단체명</div>
							<span aria-hidden="true" style="margin-left: 4rem; margin-top: 0.25rem;"></span>
							<div class="list-con"><input type="text" id="group_name" name="group_name"
									oninput="infoCheck()">
							</div>

						</div>
						<div>
							<div class="list-name">대표명</div>
							<span aria-hidden="true" style="margin-left: 4rem; margin-top: 0.25rem;"></span>
							<div class="list-con"><input type="text" id="leader_name" name="leader_name"
									oninput="infoCheck()"></div>

						</div>
						<div>
							<div class="list-name">대표전화번호</div>
							<span aria-hidden="true" style="margin-left: 4rem; margin-top: 0.25rem;"></span>
							<div class="list-con">
								<input type="text" id="leader_phone" name="leader_phone" oninput="infoCheck()">
							</div>

						</div>
						<div>
							<div class="list-name">인원수</div>
							<span aria-hidden="true" style="margin-left: 4rem; margin-top: 0.25rem;"></span>
							<div class="list-con"><input type="number" id="member_num" name="member_num" maxlength="3"
									oninput="infoCheck()">명</div>

						</div>
						<div>
							<div class="list-name">공연횟수</div>
							<span aria-hidden="true" style="margin-left: 4rem; margin-top: 0.25rem;"></span>
							<div class="list-con">
								<input type="number" name="perform_num">
							</div>

						</div>
						<div class="last">
							<div class="list-name">공연한 작품</div>
							<span aria-hidden="true" style="margin-left: 4rem; margin-top: 0.25rem;"></span>
							<div class="list-con">
								<input type="text" name="perfo_work">
							</div>

						</div>
						<button class="button" id="perfoBtn" type="submit" onclick="return confirmInsert()"
							disabled>등록</button>

					</div>

				</form>
				<form th:action="@{/mypage/performer}" method="post">
					<div class="list" th:if="${perfo_info != null}">

						<div>
							<div class="list-name">단체명</div>
							<span aria-hidden="true" style="margin-left: 4rem; margin-top: 0.25rem;"></span>
							<div class="list-con"><input type="text" id="group_name" name="group_name"
									th:value="${perfo_info.group_name}" oninput="infoCheck()">
							</div>

						</div>
						<div>
							<div class="list-name">대표명</div>
							<span aria-hidden="true" style="margin-left: 4rem; margin-top: 0.25rem;"></span>
							<div class="list-con"><input type="text" id="leader_name" name="leader_name"
									th:value="${perfo_info.leader_name}" oninput="infoCheck()"></div>

						</div>
						<div>
							<div class="list-name">대표전화번호</div>
							<span aria-hidden="true" style="margin-left: 4rem; margin-top: 0.25rem;"></span>
							<div class="list-con">
								<input type="text" id="leader_phone" name="leader_phone"
									th:value="${perfo_info.leader_phone}" oninput="infoCheck()">
							</div>

						</div>
						<div>
							<div class="list-name">인원수</div>
							<span aria-hidden="true" style="margin-left: 4rem; margin-top: 0.25rem;"></span>
							<div class="list-con"><input type="number" id="member_num" name="member_num"
									th:value="${perfo_info.member_num}" maxlength="3" oninput="infoCheck()">명</div>

						</div>
						<div>
							<div class="list-name">공연횟수</div>
							<span aria-hidden="true" style="margin-left: 4rem; margin-top: 0.25rem;"></span>
							<div class="list-con">
								<input type="number" name="perform_num" th:value="${perfo_info.perform_num}">
							</div>

						</div>
						<div class="last">
							<div class="list-name">공연한 작품</div>
							<span aria-hidden="true" style="margin-left: 4rem; margin-top: 0.25rem;"></span>
							<div class="list-con">
								<input type="text" name="perfo_work" th:value="${perfo_info.perfo_work}">
							</div>

						</div>

						<button class="button" id="perfoBtn" type="submit" onclick="return confirmUpdate()">수정</button>
					</div>

				</form>
			</div>
		</section>


		<script src="https://code.jquery.com/jquery-3.6.0.js"></script>
		<script>
			// 필수입력 요소 확인
			function infoCheck() {
				var group_name = document.getElementById('group_name').value;
				var leader_name = document.getElementById('leader_name').value;
				var leader_phone = document.getElementById('leader_phone').value;
				var member_num = document.getElementById('member_num').value;


				if (group_name !== '' && leader_name !== '' && leader_phone !== '' && member_num !== '') {
					document.getElementById('perfoBtn').disabled = false;
				} else if (group_name == '' || leader_name == '' || leader_phone == '' || member_num == '') {
					document.getElementById('perfoBtn').disabled = true;
				}
			}

			// 수정완료 확인/취소
			function confirmUpdate() {
				var result = confirm("공연자 정보를 수정하시겠습니까?");
				if (result) {
					alert("정보 수정이 완료되었습니다.");
					return true;
				} else {
					return false;
				}
			}

			function confirmInsert() {
				var result = confirm("공연자 정보를 등록하시겠습니까?");
				if (result) {
					alert("정보 등록이 완료되었습니다.");
					return true;
				} else {
					return false;
				}
			}
		</script>
		<script src="/js/open_menu.js"></script>
	</div>
</body>

</html>